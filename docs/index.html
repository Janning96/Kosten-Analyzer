<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Kosten Analyzer — Barclays & N26 (v0.8)</title>
  <style>
    :root { --bg:#0b1020; --card:#131a2e; --muted:#8ea0c6; --accent:#6cf; --good:#0a8; --bad:#e55; }
    html,body { margin:0; padding:0; background:var(--bg); color:#e8efff; font:14px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; }
    header { padding:16px 20px; border-bottom:1px solid rgba(255,255,255,.08); }
    h1 { margin:0; font-size:20px; }
    main { padding:20px; display:grid; gap:16px; }
    .row { display:grid; grid-template-columns: 1fr 1fr; gap:16px; }
    .card { background:var(--card); border:1px solid rgba(255,255,255,.08); border-radius:14px; padding:16px; box-shadow:0 10px 25px rgba(0,0,0,.25); }
    .muted { color:var(--muted); }
    .controls { display:flex; flex-wrap:wrap; gap:8px 12px; align-items:center; }
    input[type=file] { display:block; margin:6px 0 10px; }
    button { background:#1c2545; border:1px solid rgba(255,255,255,.12); color:#fff; padding:8px 12px; border-radius:10px; cursor:pointer; }
    button:hover { background:#212b56; }
    button.primary { background:var(--accent); color:#001633; border:none; font-weight:600; }
    table { width:100%; border-collapse:collapse; }
    th, td { text-align:left; padding:8px 6px; border-bottom:1px dashed rgba(255,255,255,.08); vertical-align:top; }
    th { font-size:12px; text-transform:uppercase; letter-spacing:.06em; color:var(--muted); }
    tbody tr:hover { background:rgba(255,255,255,.03); }
    .num { text-align:right; font-variant-numeric:tabular-nums; }
    .chip { display:inline-block; padding:2px 8px; border-radius:999px; background:#1f2746; color:#b7c7f0; font-size:12px; }
    .small { font-size:12px; }
    .statuslist { display:flex; flex-direction:column; gap:6px; }
    details { margin-top:10px; }
    footer { color:#8ea0c6; font-size:12px; padding:16px 20px; border-top:1px solid rgba(255,255,255,.08); }
    .iconbtn{ width:28px;height:28px;border-radius:8px; display:inline-grid; place-items:center; font-weight:700; }
    .minus{ background:#2a1a1a; color:#ffb0b0; border:1px solid #5a2a2a; }
    .plus{ background:#152a19; color:#a8ffcf; border:1px solid #295a39; }
    .grid-head{ display:grid; grid-template-columns: 1fr auto auto auto; gap:10px; align-items:center;}
    .filters{ display:flex; gap:10px; align-items:center; flex-wrap:wrap;}
    input[type=date]{ background:#101831; border:1px solid rgba(255,255,255,.12); color:#e8efff; padding:6px 8px; border-radius:8px; }
  </style>
</head>
<body>
  <header>
    <h1>Kosten Analyzer — <span class="muted">Barclays & N26</span> <span class="chip">v0.8</span></h1>
  </header>

  <main>
    <section class="row">
      <div class="card">
        <h3>Barclays Import</h3>
        <input id="barclaysInput" type="file" accept="application/pdf" />
        <div class="controls">
          <button id="barclaysBtn" class="primary">PDF → Excel → Import (Barclays)</button>
          <span class="small">Zuletzt: <b id="barclaysLast">–</b></span>
        </div>
        <div id="barclaysStatus" class="statuslist"></div>
      </div>

      <div class="card">
        <h3>N26 Import</h3>
        <input id="n26Input" type="file" accept="application/pdf" />
        <div class="controls">
          <button id="n26Btn" class="primary">PDF → Excel → Import (N26)</button>
          <span class="small">Zuletzt: <b id="n26Last">–</b></span>
        </div>
        <div id="n26Status" class="statuslist"></div>
      </div>
    </section>

    <section class="card">
      <div class="grid-head">
        <h3 style="margin:0">Liste 1 – Importiert <span id="incCount" class="chip">0</span></h3>
        <div class="filters small">
          <span>Von</span><input id="fromDate" type="date"/>
          <span>Bis</span><input id="toDate" type="date"/>
          <button id="applyFilter">Filtern</button>
          <button id="clearFilter">Reset</button>
        </div>
        <div></div>
        <button id="exportExcel" class="primary">Excel exportieren (Liste 1)</button>
      </div>
      <table id="includeTable">
        <thead><tr><th>Bank</th><th>Datum</th><th>Beschreibung</th><th class="num">Betrag (€)</th><th></th></tr></thead>
        <tbody></tbody>
      </table>
    </section>

    <section class="card">
      <h3 style="margin:0">Liste 2 – Ausgeschlossen <span id="excCount" class="chip">0</span></h3>
      <table id="excludeTable">
        <thead><tr><th>Bank</th><th>Datum</th><th>Beschreibung</th><th class="num">Betrag (€)</th><th></th></tr></thead>
        <tbody></tbody>
      </table>
    </section>

    <section class="card">
      <details>
        <summary>Debug</summary>
        <pre id="debugText" class="small" style="white-space:pre-wrap;color:#8ea0c6"></pre>
      </details>
    </section>
  </main>

  <footer>
    v0.8 — Zwei Listen mit Minus/Plus verschieben; Excel-Export nur aus Liste 1; Datum-Filter (aufsteigend).
  </footer>
</body>
</html>